Index: app/src/main/java/edu/skku/treearium/Activity/MainPackage/fragment2_test.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package edu.skku.treearium.Activity.MainPackage;\r\n\r\nimport android.Manifest;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.Configuration;\r\nimport android.location.Location;\r\nimport android.location.LocationListener;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\nimport android.util.ArrayMap;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.drawerlayout.widget.DrawerLayout;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.allattentionhere.fabulousfilter.AAH_FabulousFragment;\r\nimport com.google.android.gms.maps.CameraUpdate;\r\nimport com.google.android.gms.maps.CameraUpdateFactory;\r\nimport com.google.android.gms.maps.GoogleMap;\r\nimport com.google.android.gms.maps.OnMapReadyCallback;\r\nimport com.google.android.gms.maps.SupportMapFragment;\r\nimport com.google.android.gms.maps.model.BitmapDescriptorFactory;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.gms.maps.model.Marker;\r\nimport com.google.android.gms.maps.model.MarkerOptions;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.firestore.GeoPoint;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport edu.skku.treearium.Activity.MyMainFabFragment;\r\nimport edu.skku.treearium.Activity.Search.Trees;\r\nimport edu.skku.treearium.Activity.Search.TreesData;\r\nimport edu.skku.treearium.R;\r\nimport edu.skku.treearium.Utils.TreesContent;\r\n\r\nimport static android.location.LocationManager.GPS_PROVIDER;\r\nimport static android.location.LocationManager.NETWORK_PROVIDER;\r\n//import static edu.skku.treearium.Activity.MainActivity.thesize;\r\n//import static edu.skku.treearium.Activity.MainActivity.geolist;\r\n\r\n//implements OnMarkerClickListener\r\n//GoogleMap.OnMarkerClickListener,<--이거 오류나면 imp해야함\r\npublic class fragment2_test extends Fragment implements  AAH_FabulousFragment.Callbacks, AAH_FabulousFragment.AnimationListener{\r\n    GoogleMap map;\r\n    int len;\r\n    int il = 0;\r\n    int l;\r\n    int Mlens=0;\r\n    int ff=0;\r\n    View finalview;\r\n    DrawerLayout drawerLayout2;\r\n    public static List<GeoPoint> geolist = new ArrayList<>();\r\n    public static List<Double> dbhlist = new ArrayList<>();\r\n    public static List<String> namelist = new ArrayList<>();\r\n    public static List<String> splist = new ArrayList<>();\r\n    public static List<Double> helist = new ArrayList<>();\r\n    List<Marker> mMarkerList = new ArrayList<>();\r\n    List<LatLng> mPointList = new ArrayList<>();\r\n    static Marker currentMarker = null;\r\n\r\n\r\n    //세중추가------------------------------------------\r\n\r\n    MyMainFabFragment dialogFrag;\r\n\r\n    public static TreesData tData;\r\n    public static List<Trees> tList = new ArrayList<>();\r\n    public static ArrayMap<String, List<String>> applied_filters = new ArrayMap<>();\r\n\r\n    //--------------------------------------------------\r\n\r\n    public OnMapReadyCallback callback = new OnMapReadyCallback() {\r\n        @Override\r\n        public void onMapReady(GoogleMap googleMap) {\r\n            map = googleMap;\r\n            //selectM();\r\n            map.setInfoWindowAdapter(new GoogleMap.InfoWindowAdapter() {\r\n                @Override\r\n                public View getInfoWindow(Marker marker) {\r\n                    return null;\r\n                }\r\n\r\n                @Override\r\n                public View getInfoContents(Marker marker) {\r\n                    View infoWindow = getLayoutInflater().inflate(R.layout.custom_info_contents, null);\r\n\r\n                    TextView title = ((TextView) infoWindow.findViewById(R.id.title));\r\n                    title.setText(marker.getTitle());\r\n\r\n                    TextView snippet = ((TextView) infoWindow.findViewById(R.id.snippet));\r\n                    //TextView snippet2=((TextView)infoWindow.findViewById(R.id.snippet2));\r\n                    snippet.setText(marker.getSnippet());\r\n                    //snippet2.setText(marker.getSnippet());\r\n                    return null;\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    //Button mybtn=(Button)findViewById(R.id.mybtn);\r\n\r\n    private void startLocationService() {\r\n        Context context=this.getContext();\r\n        LocationManager manager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);\r\n\r\n\r\n        try {\r\n            int chk1 = ContextCompat.checkSelfPermission(context, Manifest.permission.ACCESS_FINE_LOCATION);\r\n            int chk2 = ContextCompat.checkSelfPermission(context, Manifest.permission.ACCESS_COARSE_LOCATION);\r\n\r\n            Location location = null;\r\n            if (chk1 == PackageManager.PERMISSION_GRANTED && chk2 == PackageManager.PERMISSION_GRANTED) {\r\n                location = manager.getLastKnownLocation(GPS_PROVIDER);\r\n\r\n            } else {\r\n                return;\r\n            }\r\n\r\n            if (location != null) {\r\n                double latitude = location.getLatitude();\r\n                double longitude = location.getLongitude();\r\n            }\r\n\r\n            GPSListener gpsListener = new GPSListener();\r\n\r\n//\r\n            long minTime = 1000;\r\n            float minDistance = 0;\r\n            manager.requestLocationUpdates(GPS_PROVIDER, minTime, minDistance, gpsListener);\r\n            manager.requestLocationUpdates(NETWORK_PROVIDER, minTime, minDistance, gpsListener);\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    class GPSListener implements LocationListener {\r\n        @Override\r\n        public void onLocationChanged(Location location) {\r\n            Double latitude = location.getLatitude();\r\n            Double longitude = location.getLongitude();\r\n            LatLng onLop=new LatLng(latitude,longitude);\r\n\r\n            String message = \"내 위치 -> Latitude : \" + onLop.latitude + \"\\nLongitude:\" + onLop.longitude;\r\n            Log.d(\"Map\", message);\r\n\r\n            showCurrentLocation(onLop.latitude, onLop.longitude);\r\n            maketree();\r\n\r\n            if(il==0)\r\n            {\r\n                //LatLng point=new LatLng(geolist.get(len-1).getLatitude(),geolist.get(len-1).getLongitude());\r\n                if(tList.size()!=0) {\r\n                    LatLng point = new LatLng(tList.get(tList.size() - 1).getTreeLocation().getLatitude(), tList.get(tList.size() - 1).getTreeLocation().getLongitude());\r\n                    CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLngZoom(point, 17);\r\n                    map.moveCamera(cameraUpdate);\r\n                    il = il + 1;\r\n                }\r\n            }\r\n            System.out.println(\"여기까진 실햄\"+onLop.latitude+\" \"+onLop.longitude);\r\n        }\r\n        @Override\r\n        public void onStatusChanged(String provider, int status, Bundle extras) {\r\n        }\r\n\r\n        @Override\r\n        public void onProviderEnabled(String provider) {\r\n        }\r\n\r\n        @Override\r\n        public void onProviderDisabled(String provider) {\r\n        }\r\n    }\r\n\r\n    public void onstat(View view)\r\n    {\r\n        ImageButton imageButton2=(ImageButton)view.findViewById(R.id.statisticalbtn);\r\n        imageButton2.setOnClickListener(new View.OnClickListener(){\r\n            @Override\r\n            public void onClick(View v) {\r\n                v=view;\r\n                BottomSheetDialog bottomSheetDialog= new BottomSheetDialog(\r\n                        getActivity(),R.style.BottomSheetDialogTheme\r\n                );\r\n                View bottomSheetView= LayoutInflater.from(getContext()).inflate(\r\n                        R.layout.layout_bottom_map_show,(LinearLayout)getView().findViewById(R.id.bottomSheetContainer));\r\n\r\n\r\n                TextView mapbottomname = bottomSheetView.findViewById(R.id.mapbottomname);//지역\r\n                TextView mapbottomlocation = bottomSheetView.findViewById(R.id.mapbottomlocation);//위도경도\r\n                TextView mapbottomtreenum = bottomSheetView.findViewById(R.id.mapbottomtreenum);//몇그루\r\n                TextView mapbottomtreespec1 = bottomSheetView.findViewById(R.id.mapbottomtreespec1);//은행\r\n                TextView mapbottomtreespec2 = bottomSheetView.findViewById(R.id.mapbottomtreespec2);//벚꽃\r\n                TextView mapbottomtreespec3 = bottomSheetView.findViewById(R.id.mapbottomtreespec3);//기타\r\n                mapbottomtreenum.setText(tList.size()+\"그루\");\r\n                if(tList.size()!=0) {\r\n\r\n                    int k = 0;\r\n                    for (int i = 0; i < tList.size(); i++) {\r\n                        if(tList.get(i).getTreeSpecies().equals(\"은행\"))\r\n                            k++;\r\n                    }\r\n                    float per = (float) k / (float) tList.size();\r\n                    per = per * 100;\r\n                    mapbottomtreespec1.setText((int)per + \"%\");\r\n\r\n\r\n                    k = 0;\r\n                    for (int i = 0; i < tList.size(); i++) {\r\n                        if(tList.get(i).getTreeSpecies().equals(\"벚꽃\"))\r\n                            k++;\r\n                    }\r\n                    per = (float) k / (float) tList.size();\r\n                    per = per * 100;\r\n                    mapbottomtreespec2.setText((int)per + \"%\");\r\n\r\n\r\n                    k = 0;\r\n                    for (int i = 0; i < tList.size(); i++) {\r\n                        if(tList.get(i).getTreeSpecies().equals(\"기타\"))\r\n                            k++;\r\n                    }\r\n                    per = (float) k / (float) tList.size();\r\n                    per = per * 100;\r\n                    mapbottomtreespec3.setText((int)per + \"%\");\r\n                } else {\r\n                    mapbottomtreespec1.setText(\"\");\r\n                    mapbottomtreespec2.setText(\"\");\r\n                    mapbottomtreespec3.setText(\"\");\r\n                }\r\n\r\n                if (tList.size()!=0){\r\n                    int s = 0;\r\n                    int m = 0;\r\n                    int l = 0;\r\n                    for (int i=0; i<tList.size(); i++)\r\n                    {\r\n                        if (Double.parseDouble(tList.get(i).getTreeDbh()) < 16)\r\n                        {\r\n                            s++;\r\n                        } else if (Double.parseDouble(tList.get(i).getTreeDbh()) < 29 && Double.parseDouble(tList.get(i).getTreeDbh()) > 16)\r\n                        {\r\n                            m++;\r\n                        } else {\r\n                            l++;\r\n                        }\r\n                    }\r\n                    TextView mapbottomtreedbh1 = bottomSheetView.findViewById(R.id.mapbottomtreedbh1);//소경목 6~16\r\n                    TextView mapbottomtreedbh2 = bottomSheetView.findViewById(R.id.mapbottomtreedbh2);//중경목 16~29\r\n                    TextView mapbottomtreedbh3 = bottomSheetView.findViewById(R.id.mapbottomtreedbh3);//대경목 29~\r\n\r\n                    int tmp = (int)((float)s / (float)tList.size())*100;\r\n                    mapbottomtreedbh1.setText(tmp + \"%\");\r\n                    tmp = (int)((float)m / (float)tList.size())*100;\r\n                    mapbottomtreedbh2.setText(tmp + \"%\");\r\n                    tmp = (int)((float)l / (float)tList.size())*100;\r\n                    mapbottomtreedbh3.setText(tmp + \"%\");\r\n                }\r\n\r\n\r\n                if (tList.size()!=0){\r\n                    int sh = 0;\r\n                    int mh = 0;\r\n                    int lh = 0;\r\n                    for (int i=0; i<tList.size(); i++)\r\n                    {\r\n                        if (Double.parseDouble(tList.get(i).getTreeHeight()) < 5)\r\n                        {\r\n                            sh++;\r\n                        } else if (Double.parseDouble(tList.get(i).getTreeHeight()) < 10 && Double.parseDouble(tList.get(i).getTreeHeight()) > 5)\r\n                        {\r\n                            mh++;\r\n                        } else {\r\n                            lh++;\r\n                        }\r\n                    }\r\n                    TextView mapbottomtreeh1 = bottomSheetView.findViewById(R.id.mapbottomtreeh1);//10m 이상\r\n                    TextView mapbottomtreeh2 = bottomSheetView.findViewById(R.id.mapbottomtreeh2);//5m 이상\r\n                    TextView mapbottomtreeh3 = bottomSheetView.findViewById(R.id.mapbottomtreeh3);//~5m\r\n\r\n                    int tmp = (int)((float)lh / (float)tList.size())*100;\r\n                    mapbottomtreeh1.setText(tmp + \"%\");\r\n                    tmp = (int)((float)mh / (float)tList.size())*100;\r\n                    mapbottomtreeh2.setText(tmp + \"%\");\r\n                    tmp = (int)((float)sh / (float)tList.size())*100;\r\n                    mapbottomtreeh3.setText(tmp + \"%\");\r\n                }\r\n\r\n\r\n                bottomSheetDialog.setContentView(bottomSheetView);\r\n                bottomSheetDialog.show();\r\n            }\r\n        });\r\n    }\r\n\r\n    public boolean btnbool(View view,LatLng curPoint)\r\n    {\r\n        ImageButton imageButton=(ImageButton)view.findViewById(R.id.mybtn);\r\n\r\n        imageButton.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View view1)\r\n            {\r\n                view1=view;\r\n                map.animateCamera(CameraUpdateFactory.newLatLngZoom(curPoint, 17));\r\n                if(l==1)\r\n                {\r\n                    Toast.makeText(getContext(), \"지급부터 내 위치 자동 찾기 기능을 종료합니다\", Toast.LENGTH_LONG).show();\r\n                    l=0;\r\n\r\n                }\r\n                else if(l==0)\r\n                {\r\n                    Toast.makeText(getContext(), \"지금부터 내 위치 자동 찾기를 시작합니다\", Toast.LENGTH_LONG).show();\r\n                    l=1;\r\n                }\r\n            }\r\n        });\r\n        if(l==1)\r\n        {\r\n            System.out.print(\"트루다\");\r\n            return true;\r\n        }\r\n        else\r\n        {\r\n            System.out.print(\"퍼스다\");\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n    private void showCurrentLocation(Double latitude, Double longitude) {\r\n        LatLng curPoint = new LatLng(latitude, longitude);\r\n\r\n        String markerTitle = \"내위치\";\r\n        String markerSnippet = \"위치정보가 확인되었습니다.\"+latitude+\"\\n\"+longitude;\r\n\r\n        if (currentMarker != null) currentMarker.remove();\r\n\r\n        MarkerOptions markerOptions = new MarkerOptions();\r\n        markerOptions.position(curPoint);\r\n        markerOptions.title(markerTitle);\r\n        markerOptions.snippet(markerSnippet);\r\n        markerOptions.draggable(false);\r\n        markerOptions.icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_RED));\r\n        currentMarker=map.addMarker(markerOptions);\r\n\r\n        l=0;\r\n        if(btnbool(finalview, curPoint))\r\n        {\r\n            System.out.print(\"bool실행\");\r\n            CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLngZoom(curPoint, 17);\r\n            map.moveCamera(cameraUpdate);\r\n        }\r\n    }\r\n\r\n    public void markeron2(LatLng point,String name,String sp, Double dbh){\r\n        MarkerOptions mapoptions=new MarkerOptions();\r\n        mapoptions.title(\"이름 : \"+name);\r\n        Double latitude2=point.latitude;\r\n        Double longitude2=point.longitude;\r\n        mapoptions.snippet(\"DBH : \"+dbh + \", 학종 : \" + sp);\r\n        mapoptions.position(new LatLng(latitude2,longitude2));\r\n        mapoptions.icon(BitmapDescriptorFactory.fromResource(R.mipmap.tree_icon_foreground)); //map에 tree icon 입력\r\n\r\n//        if(tList.get(i).getTreeSpecies().equals(\"은행나무\")){\r\n//            mapoptions.icon(BitmapDescriptorFactory.fromResource(R.mipmap.tree_icon_foreground));\r\n//\r\n//        }\r\n\r\n        System.out.println(latitude2);\r\n        //map.animateCamera(CameraUpdateFactory.newLatLng(point));//마지막에만 카메라 이동하도록 고쳐야함\r\n        Marker tr2mark=map.addMarker(mapoptions);\r\n        //map.setOnMarkerClickListener(this);\r\n        //onMarkerClick(tr2mark);\r\n        //onMarkerClick(tr2mark);\r\n\r\n        //map.setOnMarkerClickListener(this);\r\n\r\n        mMarkerList.add(tr2mark);\r\n        Mlens=Mlens+1;\r\n        mPointList.add(point);\r\n        selectM();\r\n    }\r\n    public void selectM()//ㅈ댐 이거 다 똑같이 치수가 나옴\r\n    {\r\n        map.setOnMarkerClickListener(new GoogleMap.OnMarkerClickListener(){\r\n            @Override\r\n            public boolean onMarkerClick(Marker marker) {\r\n\r\n                int i;\r\n                for(i=0;i<Mlens-1;i++)\r\n                {\r\n                    if(mMarkerList.get(i)==marker)\r\n                    {\r\n                        System.out.println(\"이힝\"+i);\r\n                        System.out.println(\"이건 몇번째 i일까\"+i);\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                BottomSheetDialog bottomSheetDialog= new BottomSheetDialog(\r\n                        getActivity(),R.style.BottomSheetDialogTheme\r\n                );\r\n                View bottomSheetView= LayoutInflater.from(getContext()).inflate(\r\n                        R.layout.bottom_sheet_background,(LinearLayout)getView().findViewById(R.id.bottomSheetContainer2));\r\n\r\n\r\n                EditText sp1 = bottomSheetView.findViewById(R.id.setsp1);\r\n                sp1.setText(tList.get(i%tList.size()).getTreeSpecies());\r\n\r\n                EditText he1=bottomSheetView.findViewById(R.id.sethe2);\r\n                he1.setText(tList.get(i%tList.size()).getTreeHeight());\r\n\r\n                EditText dbh1=bottomSheetView.findViewById(R.id.setdbh3);\r\n                dbh1.setText(tList.get(i%tList.size()).getTreeDbh());\r\n\r\n                EditText ung1=bottomSheetView.findViewById(R.id.setung4);\r\n                ung1.setText(\"못구함\");\r\n\r\n                EditText gung1=bottomSheetView.findViewById(R.id.setgung5);\r\n                if(Double.parseDouble(tList.get(i%tList.size()).getTreeDbh())<6)\r\n                {\r\n                    gung1.setText(\"치수\");\r\n                }\r\n                else if(Double.parseDouble(tList.get(i%tList.size()).getTreeDbh())<16&&Double.parseDouble(tList.get(i%tList.size()).getTreeDbh())>6)\r\n                {\r\n                    gung1.setText(\"소경목\");\r\n                }\r\n                else if(Double.parseDouble(tList.get(i%tList.size()).getTreeDbh())>16&&Double.parseDouble(tList.get(i%tList.size()).getTreeDbh())<29)\r\n                {\r\n                    gung1.setText(\"중경목\");\r\n                }\r\n                else if(Double.parseDouble(tList.get(i%tList.size()).getTreeDbh())>=29)\r\n                {\r\n                    gung1.setText(\"대경목\");\r\n                }\r\n\r\n\r\n\r\n\r\n\r\n\r\n                bottomSheetView.findViewById(R.id.xbtn).setOnClickListener(new View.OnClickListener(){\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Toast.makeText(getContext(),\"정보 창을 닫습니다\",Toast.LENGTH_SHORT).show();\r\n                        bottomSheetDialog.dismiss();\r\n                    }\r\n                });\r\n                bottomSheetDialog.setContentView(bottomSheetView);\r\n                bottomSheetDialog.show();\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n    /*@Override\r\n    public boolean onMarkerClick(Marker marker) {\r\n        int i;\r\n        for(i=0;i<Mlens-1;i++)\r\n        {\r\n            if(mMarkerList.get(i)==marker)\r\n            {\r\n                break;\r\n            }\r\n        }\r\n\r\n        tList.get(i);\r\n\r\n        BottomSheetDialog bottomSheetDialog= new BottomSheetDialog(\r\n                getActivity(),R.style.BottomSheetDialogTheme\r\n        );\r\n        View bottomSheetView= LayoutInflater.from(getContext()).inflate(\r\n                R.layout.bottom_sheet_background,(LinearLayout)getView().findViewById(R.id.bottomSheetContainer2));\r\n\r\n\r\n        EditText sp1 = bottomSheetView.findViewById(R.id.setsp1);\r\n        sp1.setText(tList.get(i).getTreeSpecies());\r\n\r\n        EditText he1=bottomSheetView.findViewById(R.id.sethe2);\r\n        he1.setText(tList.get(i).getTreeHeight());\r\n\r\n        EditText dbh1=bottomSheetView.findViewById(R.id.setdbh3);\r\n        dbh1.setText(tList.get(i).getTreeDbh());\r\n\r\n        EditText ung1=bottomSheetView.findViewById(R.id.setung4);\r\n        ung1.setText(\"못구함\");\r\n\r\n        EditText gung1=bottomSheetView.findViewById(R.id.setgung5);\r\n        if(Double.parseDouble(tList.get(i).getTreeDbh())<6)\r\n        {\r\n            gung1.setText(\"치수\");\r\n        }\r\n        else if(Double.parseDouble(tList.get(i).getTreeDbh())<16&&Double.parseDouble(tList.get(i).getTreeDbh())>6)\r\n        {\r\n            gung1.setText(\"소경목\");\r\n        }\r\n        else if(Double.parseDouble(tList.get(i).getTreeDbh())>16&&Double.parseDouble(tList.get(i).getTreeDbh())<29)\r\n        {\r\n            gung1.setText(\"중경목\");\r\n        }\r\n        else if(Double.parseDouble(tList.get(i).getTreeDbh())>=29)\r\n        {\r\n            gung1.setText(\"대경목\");\r\n        }\r\n        bottomSheetView.findViewById(R.id.xbtn).setOnClickListener(new View.OnClickListener(){\r\n            @Override\r\n            public void onClick(View v) {\r\n                Toast.makeText(getContext(),\"정보 창을 닫습니다\",Toast.LENGTH_SHORT).show();\r\n                bottomSheetDialog.dismiss();\r\n            }\r\n        });\r\n        bottomSheetDialog.setContentView(bottomSheetView);\r\n        bottomSheetDialog.show();\r\n        return true;\r\n    }*/\r\n\r\n\r\n\r\n    public void maketree()\r\n    {\r\n        System.out.println(\"들어가서 팅기나?\");\r\n        /*if(geolist!=null&&geolist.size()<=datasize)\r\n        {\r\n            len=0;\r\n            for(int i=0;i<geolist.size();i++)\r\n            {\r\n                double newla = geolist.get(i).getLatitude();\r\n                double newlo=geolist.get(i).getLongitude();\r\n                LatLng geoLatlng = new LatLng(newla,newlo);\r\n                String name=namelist.get(i);\r\n                String sp=splist.get(i);\r\n                Double dbh=dbhlist.get(i);\r\n                System.out.println(i+\"i번쨰 쫘표!!\"+geolist.get(i));\r\n                System.out.println(i+\"i번쨰 latlng!!\"+geoLatlng);\r\n                System.out.println(i+\"i번쨰 name!!\"+name);\r\n                System.out.println(i+\"i번쨰 sp!!\"+sp);\r\n                System.out.println(i+\"i번쨰 dbh!!\"+dbh);\r\n                //markeron2(geoLatlng,name,sp,dbh);\r\n                len=len+1;\r\n            }\r\n        }\r\n        else if(geolist.size()==0)\r\n        {\r\n\r\n        }*/\r\n\r\n\r\n        if(tList!=null && tList.size() != 0)\r\n        {\r\n            for(int i=0; i<tList.size(); i++){\r\n                Trees tree = tList.get(i);\r\n                LatLng geoLatlng = new LatLng(tree.getTreeLocation().getLatitude(),tree.getTreeLocation().getLongitude());\r\n                markeron2(geoLatlng,tree.getTreeName(),tree.getTreeSpecies(),Double.parseDouble(tree.getTreeDbh()));\r\n            }\r\n            //ff=1;\r\n        }\r\n    }\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater,\r\n                             @Nullable ViewGroup container,\r\n                             @Nullable Bundle savedInstanceState) {\r\n\r\n        finalview= inflater.inflate(R.layout.fragment_fragment2_test, container, false);\r\n        //세중-------------------------------------------------\r\n        final FloatingActionButton fab = (FloatingActionButton) finalview.findViewById(R.id.filterBtnMap);\r\n        dialogFrag = MyMainFabFragment.newInstance();\r\n        dialogFrag.setParentFab(fab);\r\n        fab.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                dialogFrag.setCallbacks(fragment2_test.this);\r\n                dialogFrag.show(getActivity().getSupportFragmentManager(), dialogFrag.getTag());\r\n\r\n            }\r\n        });\r\n\r\n        tData = TreesContent.getTrees();\r\n        tList = TreesContent.getTrees().getAllTrees();\r\n\r\n        //세중-------------------------------------------------\r\n\r\n        return finalview;\r\n\r\n    }\r\n\r\n\r\n    //세중추가------------------------------------------\r\n    @Override\r\n    public void onResult(Object result) {\r\n        Log.d(\"k9res\", \"onResult: \" + result.toString());\r\n        if (result.toString().equalsIgnoreCase(\"swiped_down\")) {\r\n            //do something or nothing\r\n        } else {\r\n            if (result != null) {\r\n                ArrayMap<String, List<String>> applied_filters = (ArrayMap<String, List<String>>) result;\r\n                if (applied_filters.size() != 0) {\r\n                    List<Trees> filteredList = tData.getAllTrees();\r\n                    System.out.println(filteredList);\r\n                    //iterate over arraymap\r\n                    for (Map.Entry<String, List<String>> entry : applied_filters.entrySet()) {\r\n                        Log.d(\"k9res\", \"entry.key: \" + entry.getKey());\r\n                        switch (entry.getKey()) {\r\n                            case \"dbh\":\r\n                                filteredList = tData.getDBHFilteredtrees(entry.getValue(), filteredList);\r\n                                //System.out.println(\"dbh로 필터 리스트 채움\");\r\n                                break;\r\n                            case \"height\":\r\n                                filteredList = tData.getHeightFilteredtrees(entry.getValue(), filteredList);\r\n                                //System.out.println(\"height로 필터 리스트 채움\");\r\n                                break;\r\n                            case \"species\":\r\n                                filteredList = tData.getSpeciesFilteredtrees(entry.getValue(), filteredList);\r\n                                //System.out.println(\"종으로 필터 리스트 채움\");\r\n                                break;\r\n                            case \"landmark\":\r\n                                filteredList = tData.getLandMarkFilteredtrees(entry.getValue(), filteredList);\r\n                                break;\r\n\r\n                        }\r\n                    }\r\n                    Log.d(\"k9res\", \"new size: \" + filteredList.size());\r\n                    tList.clear(); //비우고\r\n                    tList.addAll(filteredList);// 필터해서\r\n                    System.out.println(\"필터 후 tList\" + tList);\r\n                    map.clear();\r\n                    maketree();\r\n\r\n\r\n                } else {\r\n                    tList.addAll(tData.getAllTrees()); //다 넣고\r\n                    map.clear();\r\n                    maketree();\r\n                }\r\n            }\r\n            //handle result\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onConfigurationChanged(Configuration newConfig) {\r\n        super.onConfigurationChanged(newConfig);\r\n        if (dialogFrag.isAdded()) {\r\n            dialogFrag.dismiss();\r\n            dialogFrag.show(getActivity().getSupportFragmentManager(), dialogFrag.getTag());\r\n        }\r\n\r\n    }\r\n    //세중추가-------------------------------------------------\r\n\r\n    public boolean checkForGpsProvider() {\r\n        Context context=this.getContext();\r\n        LocationManager locationManager = (LocationManager)\r\n                context.getSystemService(Context.LOCATION_SERVICE);\r\n        return locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n        SupportMapFragment mapFragment =\r\n                (SupportMapFragment) getChildFragmentManager().findFragmentById(R.id.map);\r\n        if (mapFragment != null) {\r\n            mapFragment.getMapAsync(callback);\r\n\r\n            if(!checkForGpsProvider())\r\n            {\r\n                Toast.makeText(this.getContext(), \"위치 정보를 켜야 합니다.\", Toast.LENGTH_LONG).show();\r\n                Intent i = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);\r\n                startActivity(i);\r\n            }\r\n            //System.out.print(\"LIST : \"+geolist);\r\n            startLocationService();\r\n            onstat(view);\r\n\r\n            //System.out.print(\"2LIST : \"+geolist);\r\n        }\r\n    }\r\n\r\n    public ArrayMap<String, List<String>> getApplied_filters() {\r\n        return applied_filters;\r\n    }\r\n\r\n    public TreesData gettData() {\r\n        return tData;\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onOpenAnimationStart() {\r\n        Log.d(\"aah_animation\", \"onOpenAnimationStart: \");\r\n    }\r\n\r\n    @Override\r\n    public void onOpenAnimationEnd() {\r\n        Log.d(\"aah_animation\", \"onOpenAnimationEnd: \");\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onCloseAnimationStart() {\r\n        Log.d(\"aah_animation\", \"onCloseAnimationStart: \");\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onCloseAnimationEnd() {\r\n        Log.d(\"aah_animation\", \"onCloseAnimationEnd: \");\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/edu/skku/treearium/Activity/MainPackage/fragment2_test.java	(revision 1e667112e8e91c90a8f2d2be2807cebdf71b4363)
+++ app/src/main/java/edu/skku/treearium/Activity/MainPackage/fragment2_test.java	(date 1603072059592)
@@ -457,11 +457,6 @@
                     gung1.setText("대경목");
                 }
 
-
-
-
-
-
                 bottomSheetView.findViewById(R.id.xbtn).setOnClickListener(new View.OnClickListener(){
                     @Override
                     public void onClick(View v) {
